<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Register</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link rel="stylesheet" href="../public/css/register.css">
    <style>
      body {
    background-color: #f8f9fa;
  }

  .container {
    margin-top: 50px;
  }

  .form-group {
    margin-bottom: 20px;
  }

  label {
    font-weight: bold;
  }

  .btn-primary {
    background-color: #007bff;
    border-color: #007bff;
  }

  .btn-primary:hover {
    background-color: #0056b3;
    border-color: #0056b3;
  }

 
       .error-message {
    color: red;
    font-size: 0.9rem;
  }
    </style>
  </head>
  <body>
    <%- include('../partials/header.ejs') %>
    <div class="container w-50">
      <p class="mb-0 error-message"><%=success%><%=error%><%=accMsg%></p>
      <h1 class="mb-5">Registration</h1>
      <form action="/register" method="post" onsubmit="return validateForm()">
        <div class="form-group">
          <label for="fullName">Full Name</label>
          <input type="text" class="form-control" id="fullName" name="fullName" required>
          <span id="fullNameError" class="error-message"></span>
        </div>
        <div class="form-group">
          <label for="email">Email Address</label>
          <input type="email" class="form-control" id="email" name="email" required>
          <span id="emailError" class="error-message"></span>
        </div>
        <div class="form-group">
          <label for="mobile">Mobile Number</label>
          <input type="text" class="form-control" id="mobile" name="mobile" required>
          <span id="mobileError" class="error-message"></span>
        </div>
        <div class="form-group">
          <label for="password">Password</label>
          <input type="password" class="form-control" id="password" name="password" required>
          <span id="passwordError" class="error-message"></span>
        </div>
        <div class="form-group">
          <label for="confirmPassword">Confirm Password</label>
          <input type="password" class="form-control" id="confirmPassword" name="confirmPassword" required>
          <span id="confirmPasswordError" class="error-message"></span>
        </div>
        <button type="submit" class="btn btn-primary mb-5">Register</button>
      </form>
    </div>
    <%- include('../partials/footer.ejs') %>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
<script>
  function validateForm() {
      var fullName = document.getElementById('fullName').value;
      var email = document.getElementById('email').value;
      var mobile = document.getElementById('mobile').value;
      var password = document.getElementById('password').value;
      var confirmPassword = document.getElementById('confirmPassword').value;
      var valid = true;

      // Clear previous error messages
      document.querySelectorAll('.error-message').forEach(function (element) {
        element.innerText = '';
      });

      if (!fullName.trim()) {
        document.getElementById('fullNameError').innerText = 'Full Name is required';
        valid = false;
      }

      if (!email.trim()) {
        document.getElementById('emailError').innerText = 'Email Address is required';
        valid = false;
      } else if (!validateEmail(email)) {
        document.getElementById('emailError').innerText = 'Enter a valid email address';
        valid = false;
      }

      if (!mobile.trim()) {
        document.getElementById('mobileError').innerText = 'Mobile Number is required';
        valid = false;
      } else if (!validateMobile(mobile)) {
        document.getElementById('mobileError').innerText = 'Enter a valid mobile number';
        valid = false;
      }

      if (!password.trim()) {
        document.getElementById('passwordError').innerText = 'Password is required';
        valid = false;
      } else if (!validatePassword(password)) {
        document.getElementById('passwordError').innerText = 'Password should be at least 8 characters long and contain at least one letter, one number, and one special character';
        valid = false;
      }

      if (!confirmPassword.trim()) {
        document.getElementById('confirmPasswordError').innerText = 'Confirm Password is required';
        valid = false;
      } else if (password !== confirmPassword) {
        document.getElementById('confirmPasswordError').innerText = 'Passwords do not match';
        valid = false;
      }

      return valid;
    }

    function validateEmail(email) {
      // Regular expression for email validation
      var regex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
      return regex.test(email);
    }

    function validateMobile(mobile) {
      // Regular expression for mobile number validation
      var regex = /^\d{10}$/;
      return regex.test(mobile);
    }

    function validatePassword(password) {
      // Regular expression for password validation
      var regex = /^(?=.*[A-Za-z])(?=.*\d)(?=.*[@$!%*#?&])[A-Za-z\d@$!%*#?&]{8,}$/;
      return regex.test(password);
    }
</script>
  </body>
</html>